[2023-05-25 16:26:23,201][src.utils][INFO] - Git sha: cb48181a15e2c8c1bbfe2c384261548e9ed14a3a
[2023-05-25 16:26:23,211][src.utils][INFO] - Changed files: ['conf/tasks/compute_dependence_with_base_changes.yaml', 'src/evals/prompts/distribution_prompt.py']
[2023-05-25 16:26:23,219][src.utils][INFO] - Git diff:
diff --git a/conf/tasks/compute_dependence_with_base_changes.yaml b/conf/tasks/compute_dependence_with_base_changes.yaml
index 366c20f..e7afbc6 100644
--- a/conf/tasks/compute_dependence_with_base_changes.yaml
+++ b/conf/tasks/compute_dependence_with_base_changes.yaml
@@ -1,7 +1,7 @@
-sequence_type: binary
+sequence_type: integer
 model: gpt-3.5-turbo
 num_shots: 4
 on_ambiguous_sequences: true
 num_samples: 1
-distribution: default
+distribution: self-consistency
 shot_method: random
diff --git a/src/evals/prompts/distribution_prompt.py b/src/evals/prompts/distribution_prompt.py
index f409b87..7e7f297 100644
--- a/src/evals/prompts/distribution_prompt.py
+++ b/src/evals/prompts/distribution_prompt.py
@@ -4,21 +4,97 @@ different distbutions. This should be easiest to do by adding to the DISTRIBUTIO
 dictionary in this file.
 """
 
-SELF_CONTINUATION_PROMPT = """
+SELF_CONTINUATION_PROMPT = (
+"""
 In your opinion, what is the most likely continuation of the following sequence?
 Give your response as a number, with no additional commentary.
 """
+)
+SELF_EXPLANATION_PROMPT = (
+"""
+In your opinion, what is the most likely function which generated the following sequence?
+Assume the first number was generated by f(0), the second by f(1), and so on.
+The function should output the number in decimal form.
+Give your response in the format:
+Explanation: <function>
+"""
+)
+
+SIMULATION_CONTINUATION_PROMPT = (
+"""
+Please choose the continuation of the following sequence which you think is most likely.
+Give your response as a number, with no additional commentary.
+"""
+)
+
+SIMULATION_EXPLANATION_PROMPT = (
+"""
+Please choose the function which you think is most likely to have generated the following sequence.
+Assume the first number was generated by f(0), the second by f(1), and so on.
+The function should output the number in decimal form.
+Give your response in the format:
+Explanation: <function>
+"""
+)
+
+CONSISTENT_CONTINUATION_PROMPT = (
+"""
+Choose a continuation of the following sequence.
+You will be separately asked to choose a function which generated the sequence. 
+Please choose a continuation which is consistent with the function you will choose.
+Give your response as a number, with no additional commentary.
+"""
+)
 
-SELF_EXPLANATION_PROMPT = """In your opinion, what is the most likely function which generated the following sequence?
+CONSISTENT_EXPLANATION_PROMPT = (
+"""
+Choose a function which generates the following sequence.
+You will be separately asked to choose a continuation of the sequence.
+Please choose a function which is consistent with the continuation you will choose.
+Assume the first number was generated by f(0), the second by f(1), and so on.
+The function should output the number in decimal form.
+Give your response in the format:
+Explanation: <function>
+"""
+)
+
+FORCED_CONSISTENT_CONTINUATION_PROMPT = (
+"""
+Choose a continuation of the following sequence.
+You will be separately asked to choose a function which generated the sequence.
+Please choose a continuation which is consistent with the function you will choose.
+It is more important that you choose a continuation which is consistent with the function you will choose,
+than that you choose the most likely continuation.
+Please choose a continuation which is consistent with the function you will choose.
+Give your response as a number, with no additional commentary.
+"""
+)
+
+FORCED_CONSISTENT_EXPLANATION_PROMPT = (
+"""
+Choose a function which generates the following sequence.
+You will be separately asked to choose a continuation of the sequence.
+Please choose a function which is consistent with the continuation you will choose.
+It is more important that you choose a function which is consistent with the continuation you will choose,
+than that you choose the most likely function.
 Assume the first number was generated by f(0), the second by f(1), and so on.
 The function should output the number in decimal form.
 Give your response in the format:
 Explanation: <function>
 """
+)
 
 DISTRIBUTIONS = {
     "default": {
         "continuation": SELF_CONTINUATION_PROMPT,
         "explanation": SELF_EXPLANATION_PROMPT,
-    }
+    },
+    "self-simulation": {
+        "continuation": SIMULATION_CONTINUATION_PROMPT,
+        "explanation": SIMULATION_EXPLANATION_PROMPT,
+    },
+    "self-consistency": {
+        "continuation": CONSISTENT_CONTINUATION_PROMPT,
+        "explanation": CONSISTENT_EXPLANATION_PROMPT,
+    },
 }
